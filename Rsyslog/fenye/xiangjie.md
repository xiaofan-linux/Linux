# 常见日志详解
| 日志文件 | 详解|
| -- | -- |
|/var/log/message|标准系统错误信息，记录系统中所有发生的事情|
|/var/log/maillog|邮件系统产生的日志信息|
|/var/log/secure|记录系统的登录情况
|/var/log/cron|记录crond计划任务产生的时间信息|
|/var/log/dmesg|记录linux系统在引导过程中的各种记录信息|
|/var/log/lastlog|记录每个用户最近的登录事件；用lastlog命令查看|
|/var/log/wtmp|记录每个用户登录、注销及系统启动和停机事件；用last查看|
|/var/log/btmp|记录失败的、错误的登录尝试及验证事件；用lastb命令查看|
|var/run/utmp|记录当前登录的用户信息。这个文件随着用户的登录和注销而不断变化，可以用w、who、users等命令查询|
|/var/log/cups|记录打印信息的日志|
|/var/log/secure|记录验证、授权方面的信息，只要涉及账号和密码相关的会记录，比如：系统登录、ssh登录、su切换用户、sudo授权、添加用户、删除用户等等|

|名称|详解
|--|--|
|auth|PAM认证相关日志；|
|authpriv|SSH、FTP登录相关日志；|
|cron|任务计划相关日志；|
|daemon|守护进程相关日志；|
|kern|内核相关日志；|
|lpr|打印相关日志；|
|mail|邮件相关日志；|
|mark|标记相关日志；|
|news|新闻相关日志；|
|security|安全相关日志与auth类似；|
|syslog|Rsyslog自己的日志；|
|user|用户相关日志；|
|uucp|UNIX to UNIX cp相关日志；|
|local0 to local7|用户自定义使用设置日志；|
|*|表示所有的facility；|


### 级别（从上至下，从低到高）
|级别|详解|
|--|--|
|*|表示所有日志级别；|
|none|跟*相反表示什么都没有；|
|debug|程序或系统调试信息；|
|info|一般信息；|
|notice|不影响正常功能需要注意的信息；|
|warning|可能影响系统功能提醒用户的重要事件；|
|error|错误信息；|
|crit|比较严重的信息；|
|alert|必须马上处理的警告信息；|
|emerg/panic|会导致系统不可用的严重信息；|


### 连接符号
|连接符号|详解|
|--|--|
|“*”|表示所有日志等级，比如：authpriv.*，表示authpriv认证信息服务产生的所有等级日志都记录|
|“.”|代表只要比后面的等级高（包含该等级）日志都会记录下来。比如：“cron.info”代表cron服务产生的日志，只要日志等级大于或等于info级别都会记录|
|“.=”|代表记录所需等级的日志，其他等级的不记录。比如：“*.=emerg”代表任何服务的产生的日志，只要等级是emerg等级就会记录。这种方法很少见，了解即可。|
|“.!”|代表不等于，也就是除了该等级的日志不记录，其他等级的都记录|

### syslog协议格式定义如下:
| | |
|--|--|
|authpriv.* |/var/log/secure|
|服务名称[连接符号]日志登录|日志记录位置|

### 设置日志记录的位置，有以下几种。
|记录方式|举例|
| -- | -- |
|绝对路径|/var/log/secure|
|设备文件|/dev/lp0|
|转发给远程主机|@192.168.21.70|
|将日志发个特定的用户|“root”|
|忽略或丢弃|“~”|
|将日志发送所有登录到系统上的用户|“*”|

### 格式定义案例（定义在/etc/rsyslog.conf配置文件）
```
# 表示将mail相关的,info级别及以上级别都记录到mail.log文件中
mail.info  /var/log/mail.log

# 表示将auth相关的基本为info信息记录到远程主机
auth.=info @192.168.10.1

# 表示记录与user和error相反的
user.!error

# 表示记录所有日志信息的info级别及以上级别
*.info

# 所有日志及所有级别信息都记录下来
*.*
PS：多个日志来源可以使用,号隔开,如cron.info;mail.info。
```
